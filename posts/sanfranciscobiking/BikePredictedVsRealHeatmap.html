<!DOCTYPE html>
<head>    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_0f2169204a5e401eaedcca314678bd25 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
            </style>
        
    <script src="https://cdn.jsdelivr.net/npm/iso8601-js-period@0.2.1/iso8601.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/pa7_hm.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/pa7_leaflet_hm.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-timedimension@1.1.1/dist/leaflet.timedimension.control.css"/>
    
            <script>
                var TDHeatmap = L.TimeDimension.Layer.extend({

            initialize: function(data, options) {
                var heatmapCfg = {
                    radius: 15,
                    maxOpacity: 1.,
                    scaleRadius: false,
                    useLocalExtrema: false,
                    latField: 'lat',
                    lngField: 'lng',
                    valueField: 'count',
                    defaultWeight : 1,
                };
                heatmapCfg = $.extend({}, heatmapCfg, options.heatmapOptions || {});
                var layer = new HeatmapOverlay(heatmapCfg);
                L.TimeDimension.Layer.prototype.initialize.call(this, layer, options);
                this._currentLoadedTime = 0;
                this._currentTimeData = {
                    data: []
                    };
                this.data= data;
                this.defaultWeight = heatmapCfg.defaultWeight || 1;
            },
            onAdd: function(map) {
                L.TimeDimension.Layer.prototype.onAdd.call(this, map);
                map.addLayer(this._baseLayer);
                if (this._timeDimension) {
                    this._getDataForTime(this._timeDimension.getCurrentTime());
                }
            },
            _onNewTimeLoading: function(ev) {
                this._getDataForTime(ev.time);
                return;
            },
            isReady: function(time) {
                return (this._currentLoadedTime == time);
            },
            _update: function() {
                this._baseLayer.setData(this._currentTimeData);
                return true;
            },
            _getDataForTime: function(time) {
                    delete this._currentTimeData.data;
                    this._currentTimeData.data = [];
                    var data = this.data[time-1];
                    for (var i = 0; i < data.length; i++) {
                        this._currentTimeData.data.push({
                                lat: data[i][0],
                                lng: data[i][1],
                                count: data[i].length>2 ? data[i][2] : this.defaultWeight
                            });
                        }
                    this._currentLoadedTime = time;
                    if (this._timeDimension && time == this._timeDimension.getCurrentTime() && !this._timeDimension.isLoading()) {
                        this._update();
                    }
                    this.fire('timeload', {
                        time: time
                    });
                }
        });

        L.Control.TimeDimensionCustom = L.Control.TimeDimension.extend({
            initialize: function(index, options) {
                var playerOptions = {
                    buffer: 1,
                    minBufferReady: -1
                    };
                options.playerOptions = $.extend({}, playerOptions, options.playerOptions || {});
                L.Control.TimeDimension.prototype.initialize.call(this, options);
                this.index = index;
                },
            _getDisplayDateFormat: function(date){
                return this.index[date.getTime()-1];
                }
            });
            </script>
                
</head>
<body>    
    
            <div class="folium-map" id="map_0f2169204a5e401eaedcca314678bd25" ></div>
        
</body>
<script>    
    
            var map_0f2169204a5e401eaedcca314678bd25 = L.map(
                "map_0f2169204a5e401eaedcca314678bd25",
                {
                    center: [37.765, -122.44],
                    crs: L.CRS.EPSG3857,
                    zoom: 13,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_e9abae70c2f0437cbcfee7589bba8b1e = L.tileLayer(
                "https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png",
                {"attribution": "\u0026copy; \u003ca href=\"http://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors \u0026copy; \u003ca href=\"http://cartodb.com/attributions\"\u003eCartoDB\u003c/a\u003e, CartoDB \u003ca href =\"http://cartodb.com/attributions\"\u003eattributions\u003c/a\u003e", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
            ).addTo(map_0f2169204a5e401eaedcca314678bd25);
        
    

            var times = [1, 2];

            map_0f2169204a5e401eaedcca314678bd25.timeDimension = L.timeDimension(
                {times : times, currentTime: new Date(1)}
            );

            var heat_map_15f81a0d41c24dc4b55a675667c46627Control = new L.Control.TimeDimensionCustom(['Real', 'Predicted'], {
                autoPlay: false,
                backwardButton: true,
                displayDate: true,
                forwardButton: true,
                limitMinimumRange: 5,
                limitSliders: true,
                loopButton: true,
                maxSpeed: 10,
                minSpeed: 0.1,
                playButton: true,
                playReverseButton: true,
                position: "bottomleft",
                speedSlider: true,
                speedStep: 0.1,
                styleNS: "leaflet-control-timecontrol",
                timeSlider: true,
                timeSliderDrapUpdate: false,
                timeSteps: 1
                })
                .addTo(map_0f2169204a5e401eaedcca314678bd25);

                var heat_map_15f81a0d41c24dc4b55a675667c46627 = new TDHeatmap([[['37.778333', '-122.419453', 0.119547081223586], ['37.74835', '-122.413', 0.06941092193755259], ['37.772664', '-122.446956', 1.0153652606322707], ['37.775701', '-122.39674', 0.2464897446756237], ['37.749421', '-122.386532', 0.04605461643237278], ['37.778194', '-122.442686', 0.06563731571032264], ['37.776996', '-122.416841', 0.4563475121828298], ['37.771974', '-122.462838', 0.6066689137713996], ['37.75383', '-122.40626', 0.04219693909527235], ['37.746928', '-122.445623', 0.021891258811233882], ['37.77248', '-122.41468', 0.18134397287196044], ['37.77248', '-122.41468', 0.5270205563129352], ['37.774189', '-122.411078', 0.3483524674807568], ['37.805392', '-122.422831', 0.10927136473945968], ['37.7482', '-122.41222', 0.08285518839157792], ['37.749416', '-122.386462', 0.050293612566551384], ['37.761337', '-122.463977', 0.04855818958549434], ['37.764049', '-122.421803', 0.4851958443127427], ['37.775383', '-122.419034', 0.5597876713627572], ['37.774773', '-122.409792', 0.17861437505856922], ['37.806476', '-122.40526', 0.27096096442970236], ['37.74835', '-122.413', 0.25710367460560646], ['37.759311', '-122.463835', 0.041206210870683005], ['37.774189', '-122.411078', 0.4406614733120059], ['37.768673', '-122.42225', 0.20908411549172393], ['37.778333', '-122.419453', 0.09444128307282974], ['37.774241', '-122.436214', 0.512368581103692], ['37.768148', '-122.422065', 0.3239413072151647], ['37.7482', '-122.41222', 0.07850805225820348], ['37.777836', '-122.441772', 0.02811627074371072], ['37.774189', '-122.411078', 0.06093189306718794], ['37.756582', '-122.412268', 0.14571991441620755], ['37.76307', '-122.434662', 0.03796906709252555], ['37.758461', '-122.391239', 0.4000834767013777], ['37.77248', '-122.41468', 0.3728495680636529], ['37.772334', '-122.436218', 0.12795049015901555], ['37.759311', '-122.463835', 0.03636802651188388], ['37.769482', '-122.427539', 0.5531168864147216], ['37.780016', '-122.418547', 0.17765132473371376], ['37.761337', '-122.463977', 0.04008864534335699], ['37.783595', '-122.445358', 0.021354561172791366], ['37.805182', '-122.424477', 0.06699755406596812], ['37.76089', '-122.462872', 0.023864052577967917], ['37.76089', '-122.462872', 0.02439739362218402], ['37.774773', '-122.409792', 0.10688155679856055], ['37.776996', '-122.416841', 0.6279133955687884], ['37.759311', '-122.463835', 0.058986579869302204], ['37.775703', '-122.412261', 0.3278630302890267], ['37.75882', '-122.40697', 0.06715305479079767], ['37.783595', '-122.445358', 0.025701671760742385], ['37.761337', '-122.463977', 0.03670096394274609], ['37.734418', '-122.480466', 0.021007251423068113], ['37.775703', '-122.412261', 0.29080955807241093], ['37.771974', '-122.462838', 0.6502536902452989], ['37.78782', '-122.45942', 0.05882245488673118], ['37.805169', '-122.446977', 0.5224658565675881], ['37.769482', '-122.427539', 0.5314448818264969], ['37.73458', '-122.480474', 0.04249656323455344], ['37.775701', '-122.39674', 0.6887700198286977], ['37.777986', '-122.429325', 0.12390369300872003], ['37.759311', '-122.463835', 0.038970081668355014], ['37.806476', '-122.40526', 0.11254912068392715], ['37.807171', '-122.407058', 0.22145846156382762], ['37.761337', '-122.463977', 0.03775319371551809], ['37.76089', '-122.462872', 0.027870474556403478], ['37.767806', '-122.422167', 0.29401547548550444], ['37.759311', '-122.463835', 0.050460345758820115], ['37.787398', '-122.420044', 0.17371007867874408], ['37.724161', '-122.437268', 0.02243410375167174], ['37.777274', '-122.416639', 0.5626314921525468], ['37.77248', '-122.41468', 0.4832662203206574], ['37.768673', '-122.42225', 0.2775600345367187], ['37.772302', '-122.436464', 0.2038705425395441], ['37.762821', '-122.434792', 0.08729544785056662], ['37.805169', '-122.446977', 0.29167523627957737], ['37.777986', '-122.429325', 0.034121092436333614], ['37.76064', '-122.50971', 0.05610709891277159], ['37.768148', '-122.422065', 0.6978552088128164], ['37.768148', '-122.422065', 0.2943109981264588], ['37.786903', '-122.459525', 0.050584854183829644], ['37.734529', '-122.405684', 0.051364400912697464], ['37.72131', '-122.47421', 0.020907629054233063], ['37.73522', '-122.42798', 0.10018557691377945], ['37.76307', '-122.434662', 0.039613566216258396], ['37.76064', '-122.50971', 0.03927875855964827], ['37.749416', '-122.386462', 0.043917775210461266]], [['37.778333', '-122.419453', 0.22448465208549764], ['37.74835', '-122.413', 0.06315271735250283], ['37.772664', '-122.446956', 0.7593027802978507], ['37.775701', '-122.39674', 0.4644819854163843], ['37.749421', '-122.386532', 0.048663222631284274], ['37.778194', '-122.442686', 0.04705354799733198], ['37.776996', '-122.416841', 0.505734755059278], ['37.771974', '-122.462838', 0.8619561997804052], ['37.75383', '-122.40626', 0.050243842934225104], ['37.746928', '-122.445623', 0.036115499278188426], ['37.77248', '-122.41468', 0.26200895859437695], ['37.77248', '-122.41468', 0.26200895859437695], ['37.774189', '-122.411078', 0.24426730778299227], ['37.805392', '-122.422831', 0.1458132320487074], ['37.7482', '-122.41222', 0.05739586113806568], ['37.749416', '-122.386462', 0.041315930684216094], ['37.761337', '-122.463977', 0.04189859968053207], ['37.764049', '-122.421803', 0.438512047009613], ['37.775383', '-122.419034', 0.6007819726649514], ['37.774773', '-122.409792', 0.225607103322573], ['37.806476', '-122.40526', 0.21877402112662944], ['37.74835', '-122.413', 0.06315271735250283], ['37.759311', '-122.463835', 0.04095619687581051], ['37.774189', '-122.411078', 0.24426730778299227], ['37.768673', '-122.42225', 0.24023868654798633], ['37.778333', '-122.419453', 0.22448465208549764], ['37.774241', '-122.436214', 0.48979188223200953], ['37.768148', '-122.422065', 0.2687375430343283], ['37.7482', '-122.41222', 0.05739586113806568], ['37.777836', '-122.441772', 0.044719942557450196], ['37.774189', '-122.411078', 0.24426730778299227], ['37.756582', '-122.412268', 0.1517413930791775], ['37.76307', '-122.434662', 0.03725061220491101], ['37.758461', '-122.391239', 0.05857603475584052], ['37.77248', '-122.41468', 0.26200895859437695], ['37.772334', '-122.436218', 0.11476429541991302], ['37.759311', '-122.463835', 0.04095619687581051], ['37.769482', '-122.427539', 0.43960024262081154], ['37.780016', '-122.418547', 0.1614828198437771], ['37.761337', '-122.463977', 0.04189859968053207], ['37.783595', '-122.445358', 0.023623322964237272], ['37.805182', '-122.424477', 0.09483013678040624], ['37.76089', '-122.462872', 0.024588469643732392], ['37.76089', '-122.462872', 0.024588469643732392], ['37.774773', '-122.409792', 0.225607103322573], ['37.776996', '-122.416841', 0.505734755059278], ['37.759311', '-122.463835', 0.04095619687581051], ['37.775703', '-122.412261', 0.31997945883385304], ['37.75882', '-122.40697', 0.053100510709368734], ['37.783595', '-122.445358', 0.023623322964237272], ['37.761337', '-122.463977', 0.04189859968053207], ['37.734418', '-122.480466', 0.02340610702985558], ['37.775703', '-122.412261', 0.31997945883385304], ['37.771974', '-122.462838', 0.8619561997804052], ['37.78782', '-122.45942', 0.04409891195936065], ['37.805169', '-122.446977', 0.6834288744870843], ['37.769482', '-122.427539', 0.43960024262081154], ['37.73458', '-122.480474', 0.02236377741512807], ['37.775701', '-122.39674', 0.4644819854163843], ['37.777986', '-122.429325', 0.16371773271319268], ['37.759311', '-122.463835', 0.04095619687581051], ['37.806476', '-122.40526', 0.21877402112662944], ['37.807171', '-122.407058', 0.2768707433603717], ['37.761337', '-122.463977', 0.04189859968053207], ['37.76089', '-122.462872', 0.024588469643732392], ['37.767806', '-122.422167', 0.39527304424549203], ['37.759311', '-122.463835', 0.04095619687581051], ['37.787398', '-122.420044', 0.21229384954180466], ['37.724161', '-122.437268', 0.021623144551371303], ['37.777274', '-122.416639', 0.49103471934119736], ['37.77248', '-122.41468', 0.26200895859437695], ['37.768673', '-122.42225', 0.24023868654798633], ['37.772302', '-122.436464', 0.19100765620707139], ['37.762821', '-122.434792', 0.08160030903684615], ['37.805169', '-122.446977', 0.6834288744870843], ['37.777986', '-122.429325', 0.16371773271319268], ['37.76064', '-122.50971', 0.062419077729941805], ['37.768148', '-122.422065', 0.2687375430343283], ['37.768148', '-122.422065', 0.2687375430343283], ['37.786903', '-122.459525', 0.0492028401230743], ['37.734529', '-122.405684', 0.051341730931274907], ['37.72131', '-122.47421', 0.024407172446530897], ['37.73522', '-122.42798', 0.08135612610224094], ['37.76307', '-122.434662', 0.03725061220491101], ['37.76064', '-122.50971', 0.062419077729941805], ['37.749416', '-122.386462', 0.041315930684216094]]],
                {heatmapOptions: {
                        radius: 50,
                        minOpacity: 0,
                        maxOpacity: 0.6,
                        scaleRadius: false,
                        useLocalExtrema: false,
                        defaultWeight: 1,
                        
                    }
                })
                .addTo(map_0f2169204a5e401eaedcca314678bd25);

        
</script>